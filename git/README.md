Git
===

Best practices in developing with version control.

Creating a repository
---------------------

 - Master branch **must** be created as protected on `https://github.com/NexoosBR` to enforce code review and pull request processes.
 - Allow developers to push to master branch so they can accept pul requests.
 - Projects are usually created as **internal** unless they have some strategic constraints.

Maintain a repository
---------------------

 - Create a `.gitignore` in your home directory and add it to your Git global configuration using `git config --global core.excludesfile ~/.gitignore`. This .gitignore should contains files that are specific to your development machine or process, like files generated by your editor/IDE or by your OS like `.DS_Store`.
 - If you have files that are specific to your development machine or process and it's created just for a specifc projet you can use the `.git/info/exclude` to ignore it just for that project. Pay attetion because this file is not commited in the project.
 - Add to `.gitignore` of a repository files that should not be part of it, like temporary files of a framework or language (reports, logs, etc).
 - GitHub has a collection of .gitignore templates for both local and global use. They can be found [here](https://github.com/github/gitignore).
 - Delete local and remote feature branches after merging. Favor using `https://github.com/NexoosBR` merge process.
 - Perform work in a feature branch.
 - Rebase/Merge frequently to incorporate upstream changes.
 - Use a merge request for code reviews.
 - The `master` branch **must** be production-ready code **only**.

Write a feature
---------------

Create a local feature branch based off master.

```
git checkout master
git pull
git checkout -b <branch-name>
```

Name the branch after the features/bugs you are working on.

Frequently rebase (local, short-lived branches) or merge (remote, long-living, shared branches) to incorporate master changes.

Local branch:

```
git fetch origin
git rebase origin/master
```

Remote branch:

```
git fetch origin
git merge origin/master
```

Resolve conflicts. When feature is complete and tests pass, stage the changes.

```
git add --all
```

When you have staged the changes, commit them.

```
git status
git commit --verbose
```

Write a good commit message. Example format:

```
Present-tense summary in english

* More information about commit.
* More information about commit.
```

If you have created more than one commit, use a rebase to squash them into cohesive commits with good messages.
Rebase interactively. Squash commits like "Fix whitespace", "toc" into one or a small number of valuable commit(s). Edit commit messages to reveal intent.
Don't end the summary line with a period.

```
git rebase -i origin/master
```

Share your branch (if local) to create the pull request.

```
git push origin <branch-name>
```

Submit a `https://github.com/NexoosBR` pull request.

Code Review
-----------

A team member that is **not** you, must review your pull request.

Use the `https://github.com/NexoosBR` comment system.

Merge
-----

Use the `https://github.com/NexoosBR` merge request interface to accept the pull request deleting the source branch.

If the branch cannot be automatically merged, use the following procedure:

```shell
git fetch origin
git rebase -i origin/master
```

**Run tests**

```shell
git checkout master
git merge <branch-name> --no-ff
```

To make sure you don't forget to add --no-ff when merging, we strongly recommend that these settings are pre-configured globally, as follows:

```
git config --global merge.ff false
```

**Run tests**

Push the changes:

```shell
git push
```

Delete both local and remote branches:

```shell
git push origin --delete <branch-name>
git branch --delete <branch-name>
```

Mark the pull request as merged on `https://github.com/NexoosBR`.
